// @ts-nocheck
require(["esri/WebMap","esri/views/MapView","esri/layers/FeatureLayer","esri/core/reactiveUtils","esri/Graphic","esri/layers/GraphicsLayer","esri/widgets/BasemapLayerList","esri/widgets/Legend"],(function(e,t,r,a,o,i,n,s){const l=new URLSearchParams(window.location.search);let c=window.location.href,d=l.get("viewer");let m=["colebrookct","columbiact","durhamct","franklinct","haddamct","northcanaanct","roxburyct","roxburyctassessor","scotlandct","warrenct","warrenctassessor","washingtonct","wiltonct","wolcottct"].join("|"),p=new RegExp(`\\?viewer=cama\\/(${m})(\\&\\w+=[\\w-]+)*$`);null!=d&&p.test(c)?(d+=".json",console.log(d)):"https://terrenogis.com"===window.location.href||"https://terrenogis.com/"===window.location.href?window.location.href="https://www.qds.biz/gis-service":window.location.href="./onload.html";const u={mapId:"",condoLayer:"",title:"",isCondosLayer:"",noCondoLayer:""};console.log(d),fetch(d).then((e=>e.json())).then((a=>{u.mapId=a.webmapId||"6448b08504de4244973a28305b18271f",u.condoLayer=a.condoLayer,u.noCondoLayer=a.noCondoLayer,u.title=a.title,u.isCondosLayer=a.condos,u.masterTable=a.masterTable,u.zoom=a.zoom,u.parcelZoom=a.parcelZoom,u.imageUrl=a.imageUrl,u.welcomeImage=a.welcomeImage,u.pdf_Image=a.pdf_Image,u.pdf_demo=a.pdf_demographics,u.taxMap_Url=a.taxMapUrl,u.parcelMapUrl=a.parcelMapUrl,u.housingUrl=a.housingUrl,u.propertyCardPdf=a.propertyCardPdf,u.propertyCard=a.propertyCard,u.tax_bill=a.tax_bill,u.useVisionForTaxBillUrl=a.useVisionForTaxBillUrl,u.accessorName=a.accessorName,u.parcelTitle=a.parcelServiceTitle,u.tabTitle=a.tabTitle,u.basemapTitle=a.basemapTitle,u.parcelRenderer=a.parcelRenderer,u.useUniqueIdforParcelMap=a.useUniqueIdforParcelMap,u.helpUrl=a.helpUrl,u.includeFilter=a.includeFilter,u.customWelcomePage=a.customWelcomePage,u.customWelcomeMessage=a.customWelcomeMessage,u.showDisclaimer=a.showDisclaimer,u.customDisclaimerPage=a.customDisclaimerPage,u.customDisclaimerMessage=a.customDisclaimerMessage,u.DetailLinks=a.DetailLinks,u.DetailLinksToInclude=a.DetailLinksToInclude,u.includePermitLink=a.includePermitLink,u.scale=a.scale,$(".help-url").attr("href",u.helpUrl),document.getElementById("title").innerHTML=u.title;const o=new i,n=new e({portalItem:{id:u.mapId},layers:[o]});var s=new t({container:"viewDiv",map:n,units:"imperial",scale:u.scale,popupEnabled:!1,ui:{components:["attribution"]}});const l=new r({url:`${u.masterTable}`});document.getElementById("searchInput").addEventListener("input",(function(e){firstList=[],$("#results-div").css("left","0px"),$("#dropdown").toggleClass("expanded"),$("#dropdown").hide();var t=e.target.value.toUpperCase();firstList=[],secondList=[],polygonGraphics=[],$("#select-button").removeClass("btn-warning"),$("#searchInput ul").remove(),$("#suggestions").hide(),$("#dropdown").removeClass("expanded"),$("#dropdown").hide(),$("#dropdown").show(),document.getElementById("suggestions").innerHTML="",$("#featureWid").empty(),s.graphics.removeAll();let r=`\n            Street_Name LIKE '%${t}%' OR \n            MBL LIKE '%${t}%' OR \n            Location LIKE '%${t}%' OR \n            Co_Owner LIKE '%${t}%' OR \n            Uniqueid LIKE '%${t}%' OR \n            Owner LIKE '%${t}%' OR\n            GIS_LINK LIKE '%${t}%'\n        `,a=l.createQuery();a.where=r,a.returnGeometry=!1,a.outFields=["Street_Name","MBL","Location","Co_Owner","Uniqueid","Owner","GIS_LINK"];let o=new Set;l.queryFeatures(a).then((e=>{let r=document.getElementById("suggestions");r.innerHTML="",e.features.forEach((e=>{["Street_Name","MBL","Location","Co_Owner","Uniqueid","Owner","GIS_LINK"].forEach((a=>{let i=e.attributes[a];if(i&&i.includes(t)&&!o.has(i)){let e=document.createElement("div");e.className="list-group-item",e.innerText=`${i}`,r.appendChild(e),o.add(i),r.style.display="block",e.addEventListener("click",(function(e){clickedToggle=!0,runQuery(e.target.innerHTML),clickedToggle=!1}))}}))}))}))}))}))}));